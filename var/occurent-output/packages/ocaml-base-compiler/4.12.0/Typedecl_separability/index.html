<div><div class="odoc-spec"><div class="spec type" id="type-error" class="anchored"><a href="#type-error" class="anchor"></a><code><span><span class="keyword">type</span> error</span><span> = </span></code><table><tr id="type-error.Non_separable_evar" class="anchored"><td class="def variant constructor"><a href="#type-error.Non_separable_evar" class="anchor"></a><code><span>| </span><span><span class="constructor">Non_separable_evar</span> <span class="keyword">of</span> <span>string option</span></span></code></td></tr></table></div></div><div class="odoc-spec"><div class="spec exception" id="exception-Error" class="anchored"><a href="#exception-Error" class="anchor"></a><code><span><span class="keyword">exception</span> </span><span><span class="exception">Error</span> <span class="keyword">of</span> <a href="../Location/index.html#type-t">Location.t</a> * <a href="#type-error">error</a></span></code></div><div class="spec-doc"><p>Exception raised when a type declaration is not separable, or when its separability cannot be established.</p></div></div><div class="odoc-spec"><div class="spec type" id="type-mode" class="anchored"><a href="#type-mode" class="anchor"></a><code><span><span class="keyword">type</span> mode</span><span> = <a href="../Types/Separability/index.html#type-t">Types.Separability.t</a></span><span> = </span></code><table><tr id="type-mode.Ind" class="anchored"><td class="def variant constructor"><a href="#type-mode.Ind" class="anchor"></a><code><span>| </span><span><span class="constructor">Ind</span></span></code></td></tr><tr id="type-mode.Sep" class="anchored"><td class="def variant constructor"><a href="#type-mode.Sep" class="anchor"></a><code><span>| </span><span><span class="constructor">Sep</span></span></code></td></tr><tr id="type-mode.Deepsep" class="anchored"><td class="def variant constructor"><a href="#type-mode.Deepsep" class="anchor"></a><code><span>| </span><span><span class="constructor">Deepsep</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>The mode <code>Sep</code> (&quot;separable&quot;) characterizes types that are indeed separable: either they only contain floating-point values, or none of the values at this type are floating-point values. On a type parameter, it indicates that this parameter must be separable for the whole type definition to be separable. For example, the mode signature for the type declaration <code>type 'a
    t = 'a</code> is <code>('a : Sep) t</code>. For the right-hand side to be separable, the parameter <code>'a</code> must be separable.</p><p>The mode <code>Ind</code> (&quot;indifferent&quot;) characterizes any type -- separable or not. On a type parameter, it indicates that this parameter needs not be separable for the whole type definition to be separable. For example, <code>type 'a t = 'a * bool</code> does not require its parameter <code>'a</code> to be separable as <code>'a * bool</code> can never contain <code>float</code> values. Its mode signature is thus <code>('a : Ind) t</code>.</p><p>Finally, the mode <code>Deepsep</code> (&quot;deeply separable&quot;) characterizes types that are separable, and whose type sub-expressions are also separable. This advanced feature is only used in the presence of constraints. For example, <code>type 'a t = 'b   constraint 'a = 'b * bool</code> may not be separable even if <code>'a</code> is (its separately depends on 'b, a fragment of 'a), so its mode signature is <code>('a : Deepsep) t</code>.</p><p>The different modes are ordered as <code>Ind &lt; Sep &lt; Deepsep</code> (from the least demanding to the most demanding).</p><span class="comment-delim">*)</span></td></tr></table></div></div><div class="odoc-spec"><div class="spec value" id="val-compute_decl" class="anchored"><a href="#val-compute_decl" class="anchor"></a><code><span><span class="keyword">val</span> compute_decl : <span><a href="../Env/index.html#type-t">Env.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../Types/index.html#type-type_declaration">Types.type_declaration</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-mode">mode</a> list</span></span></code></div><div class="spec-doc"><p><code>compute_decl env def</code> returns the signature required for the type definition <code>def</code> in the typing environment <code>env</code> -- including signatures for the current recursive block.</p><p>The <a href="#exception-Error"><code>Error</code></a> exception is raised if no such signature exists -- the definition will always be invalid. This only happens when the definition is marked to be unboxed.</p><p>Variant (or record) declarations that are not marked with the &quot;<code>@@unboxed</code>&quot; annotation, including those that contain several variants (or labels), are always separable. In particular, their mode signatures do not require anything of their type parameters, which are marked <code>Ind</code>.</p><p>Finally, if <a href="../Config/index.html#val-flat_float_array"><code>Config.flat_float_array</code></a> is not set, then separability is not required anymore; we just use <code>Ind</code> as the mode of each parameter without any check.</p></div></div><div class="odoc-spec"><div class="spec type" id="type-prop" class="anchored"><a href="#type-prop" class="anchor"></a><code><span><span class="keyword">type</span> prop</span><span> = <a href="../Types/Separability/index.html#type-signature">Types.Separability.signature</a></span></code></div><div class="spec-doc"><p>Property interface (see <a href="../Typedecl_properties/index.html"><code>Typedecl_properties</code></a>). These functions rely on <a href="#val-compute_decl"><code>compute_decl</code></a> and raise the <a href="#exception-Error"><code>Error</code></a> exception on error.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-property" class="anchored"><a href="#val-property" class="anchor"></a><code><span><span class="keyword">val</span> property : <span><span>(<a href="#type-prop">prop</a>,Â unit)</span> <a href="../Typedecl_properties/index.html#type-property">Typedecl_properties.property</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-update_decls" class="anchored"><a href="#val-update_decls" class="anchor"></a><code><span><span class="keyword">val</span> update_decls : <span><a href="../Env/index.html#type-t">Env.t</a> <span class="arrow">&#45;&gt;</span></span> <span><span><span>(<a href="../Ident/index.html#type-t">Ident.t</a> * <a href="../Typedecl_properties/index.html#type-decl">Typedecl_properties.decl</a>)</span> list</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<a href="../Ident/index.html#type-t">Ident.t</a> * <a href="../Typedecl_properties/index.html#type-decl">Typedecl_properties.decl</a>)</span> list</span></span></code></div></div></div>